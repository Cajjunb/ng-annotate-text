{"version":3,"sources":["ng-annotate.coffee"],"names":[],"mappings":"AAAA;AAAA,MAAA,oFAAA;;AAAA,EAAA,UAAA,GAAa,OAAO,CAAC,MAAR,CAAe,YAAf,EAA6B,EAA7B,CAAb,CAAA;;AAAA,EAEA,QAAA,GAAW,SAAC,IAAD,EAAO,KAAP,EAAc,MAAd,GAAA;AACV,WAAO,IAAI,CAAC,MAAL,CAAY,CAAZ,EAAe,KAAf,CAAA,GAAwB,MAAxB,GAAiC,IAAI,CAAC,MAAL,CAAY,KAAZ,CAAxC,CADU;EAAA,CAFX,CAAA;;AAAA,EAKA,yBAAA,GAA4B,SAAC,WAAD,GAAA;AAC3B,WAAO,WAAW,CAAC,IAAZ,CAAiB,SAAC,CAAD,EAAI,CAAJ,GAAA;AACvB,MAAA,IAAG,CAAC,CAAC,QAAF,GAAa,CAAC,CAAC,QAAlB;AACC,eAAO,CAAA,CAAP,CADD;OAAA,MAEK,IAAG,CAAC,CAAC,QAAF,GAAa,CAAC,CAAC,QAAlB;AACJ,eAAO,CAAP,CADI;OAFL;AAIA,aAAO,CAAP,CALuB;IAAA,CAAjB,CAAP,CAD2B;EAAA,CAL5B,CAAA;;AAAA,EAaA,gBAAA,GAAmB,SAAC,IAAD,EAAO,WAAP,EAAyB,WAAzB,GAAA;AAClB,QAAA,uBAAA;;MADyB,cAAc;KACvC;;MAD2C,cAAc;KACzD;AAAA,IAAA,IAAG,WAAW,CAAC,MAAZ,KAAsB,CAAzB;AACC,aAAO,IAAP,CADD;KAAA;AAAA,IAEA,WAAA,GAAc,yBAAA,CAA0B,WAA1B,CAFd,CAAA;AAIA,SAAS,6DAAT,GAAA;AACC,MAAA,UAAA,GAAa,WAAY,CAAA,CAAA,CAAzB,CAAA;AAAA,MACA,IAAA,GAAO,QAAA,CAAS,IAAT,EAAe,UAAU,CAAC,QAAX,GAAsB,WAArC,EAAkD,SAAlD,CADP,CAAA;AAEA,MAAA,IAAG,UAAU,CAAC,QAAQ,CAAC,MAAvB;AACC,QAAA,IAAA,GAAO,gBAAA,CAAiB,IAAjB,EAAuB,UAAU,CAAC,QAAlC,EAA4C,UAAU,CAAC,UAAX,GAAwB,WAApE,CAAP,CADD;OAFA;AAAA,MAIA,IAAA,GAAO,QAAA,CAAS,IAAT,EAAe,UAAU,CAAC,UAAX,GAAwB,WAAvC,EAAoD,mDAAA,GAAsD,UAAU,CAAC,EAAjE,GAAsE,oBAAtE,GAA6F,UAAU,CAAC,IAAxG,GAA+G,0BAA/G,GAA4I,UAAU,CAAC,EAAvJ,GAA4J,KAAhN,CAJP,CADD;AAAA,KAJA;AAUA,WAAO,IAAP,CAXkB;EAAA,CAbnB,CAAA;;AAAA,EA0BA,iBAAA,GAAoB,SAAC,WAAD,EAAc,GAAd,GAAA;AACnB,QAAA,eAAA;AAAA,SAAA,kDAAA;0BAAA;AACC,MAAA,IAAG,GAAA,KAAO,CAAC,CAAC,EAAZ;AACC,eAAO,CAAP,CADD;OAAA;AAEA,MAAA,IAAG,CAAC,CAAC,QAAQ,CAAC,MAAX,GAAoB,CAAvB;AACC,QAAA,EAAA,GAAK,iBAAA,CAAkB,CAAC,CAAC,QAApB,EAA8B,GAA9B,CAAL,CAAA;AACA,QAAA,IAAG,EAAA,KAAQ,MAAX;AACC,iBAAO,EAAP,CADD;SAFD;OAHD;AAAA,KADmB;EAAA,CA1BpB,CAAA;;AAAA,EAmCA,UAAU,CAAC,OAAX,CAAmB,iBAAnB,EAAsC,SAAA,GAAA;WACrC,SAAC,IAAD,GAAA;AACC,MAAA,IAAA,GAAO,OAAO,CAAC,MAAR,CAAe;AAAA,QACrB,KAAA,EAAO,IADc;AAAA,QAErB,SAAA,EAAW,EAFU;AAAA,QAGrB,QAAA,EAAU,QAHW;AAAA,QAIrB,OAAA,EAAS,IAJY;AAAA,QAKrB,aAAA,EAAe,GALM;AAAA,QAMrB,MAAA,EAAQ,CANa;AAAA,QAOrB,aAAA,EAAe,cAPM;OAAf,EAQJ,IARI,CAAP,CAAA;aAUA,OAAO,CAAC,MAAR,CAAe,IAAf,EAAkB,IAAlB,EACC;AAAA,QAAA,GAAA,EAAK,OAAO,CAAC,OAAR,CAAgB,IAAI,CAAC,QAArB,CAAL;AAAA,QAEA,IAAA,EAAM,SAAC,KAAD,GAAA;;YAAC,QAAQ;WACd;AAAA,UAAA,IAAC,CAAA,GAAG,CAAC,MAAL,CAAY,KAAZ,CAAA,CAAA;AAAA,UACA,IAAC,CAAA,UAAD,CAAA,CADA,CAAA;AAEA,UAAA,IAAG,MAAA,CAAA,IAAQ,CAAA,SAAS,CAAC,IAAlB,KAA0B,UAA7B;mBACC,IAAC,CAAA,SAAS,CAAC,IAAX,CAAgB,IAAC,CAAA,GAAjB,EADD;WAHK;QAAA,CAFN;AAAA,QAQA,IAAA,EAAM,SAAC,KAAD,GAAA;;YAAC,QAAQ;WACd;AAAA,UAAA,IAAC,CAAA,GAAG,CAAC,OAAL,CAAa,KAAb,CAAA,CAAA;AACA,UAAA,IAAG,MAAA,CAAA,IAAQ,CAAA,SAAS,CAAC,IAAlB,KAA0B,UAA7B;mBACC,IAAC,CAAA,SAAS,CAAC,IAAX,CAAgB,IAAC,CAAA,GAAjB,EADD;WAFK;QAAA,CARN;AAAA,QAaA,SAAA,EAAW,SAAA,GAAA;AACV,iBAAO,IAAC,CAAA,GAAG,CAAC,EAAL,CAAQ,UAAR,CAAP,CADU;QAAA,CAbX;AAAA,QAgBA,OAAA,EAAS,SAAC,EAAD,GAAA;AACR,cAAA,UAAA;;YADS,KAAK,OAAO,CAAC;WACtB;AAAA,UAAA,KAAA,GAAQ,IAAC,CAAA,KAAT,CAAA;AAAA,UACA,GAAA,GAAM,IAAC,CAAA,GADP,CAAA;iBAEA,IAAC,CAAA,IAAD,CAAM,SAAA,GAAA;AACL,YAAA,IAAG,MAAA,CAAA,EAAA,KAAa,UAAhB;AACC,cAAA,EAAA,CAAA,CAAA,CADD;aAAA;AAAA,YAEA,KAAK,CAAC,QAAN,CAAA,CAFA,CAAA;mBAGA,GAAG,CAAC,MAAJ,CAAA,EAJK;UAAA,CAAN,EAHQ;QAAA,CAhBT;AAAA,QAyBA,WAAA,EAAa,SAAA,GAAA;iBACZ,IAAC,CAAA,GAAG,CAAC,IAAL,CAAU,IAAV,CAAe,CAAC,IAAhB,CAAqB,MAArB,EADY;QAAA,CAzBb;AAAA,QA4BA,UAAA,EAAY,SAAA,GAAA;AACX,cAAA,mCAAA;AAAA,UAAA,QAAA,GAAW,IAAC,CAAA,GAAI,CAAA,CAAA,CAAhB,CAAA;AAAA,UACA,QAAA,GAAW,IAAC,CAAA,OAAQ,CAAA,CAAA,CADpB,CAAA;AAGA,UAAA,IAAG,CAAA,CAAK,QAAA,IAAY,QAAb,CAAP;AACC,kBAAA,CADD;WAHA;AAAA,UAMA,GAAA,GACC;AAAA,YAAA,IAAA,EAAM,IAAN;AAAA,YACA,GAAA,EAAK,IADL;AAAA,YAEA,MAAA,EAAQ,QAAQ,CAAC,qBAAT,CAAA,CAFR;AAAA,YAGA,MAAA,EAAQ,QAAQ,CAAC,qBAAT,CAAA,CAHR;AAAA,YAIA,QAAA,EACC;AAAA,cAAA,KAAA,EAAO,MAAM,CAAC,UAAd;AAAA,cACA,MAAA,EAAQ,MAAM,CAAC,WADf;aALD;AAAA,YAOA,MAAA,EACC;AAAA,cAAA,GAAA,EAAK,QAAQ,CAAC,IAAI,CAAC,SAAnB;AAAA,cACA,IAAA,EAAM,QAAQ,CAAC,IAAI,CAAC,UADpB;aARD;WAPD,CAAA;AAkBA,UAAA,IAAG,CAAA,CAAK,GAAG,CAAC,MAAM,CAAC,KAAX,GAAmB,CAAnB,IAAyB,GAAG,CAAC,MAAM,CAAC,MAAX,GAAoB,CAA9C,CAAP;AACC,kBAAA,CADD;WAlBA;AAAA,UAuBA,IAAA,GAAO,IAAC,CAAA,oBAAD,CAAsB,GAAtB,EAA2B,GAA3B,CAvBP,CAAA;AAAA,UAwBA,IAAA,GAAO,IAAC,CAAA,oBAAD,CAAsB,GAAtB,EAA2B,GAA3B,CAxBP,CAAA;AA0BA,UAAA,IAAG,IAAC,CAAA,aAAD,KAAkB,GAArB;AACC,YAAA,IAAG,IAAA,IAAS,MAAA,CAAA,IAAW,CAAC,GAAZ,KAAmB,QAA/B;AACC,cAAA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,GAAhB,CAAA;AAAA,cACA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,IADhB,CADD;aAAA,MAGK,IAAG,IAAH;AACJ,cAAA,GAAG,CAAC,GAAJ,GAAU,IAAI,CAAC,GAAf,CAAA;AAAA,cACA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,IADhB,CADI;aAJN;WAAA,MAAA;AAQC,YAAA,IAAG,IAAA,IAAS,MAAA,CAAA,IAAW,CAAC,GAAZ,KAAmB,QAA/B;AACC,cAAA,GAAG,CAAC,GAAJ,GAAU,IAAI,CAAC,GAAf,CAAA;AAAA,cACA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,IADhB,CADD;aAAA,MAGK,IAAG,IAAH;AACJ,cAAA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,GAAhB,CAAA;AAAA,cACA,GAAG,CAAC,IAAJ,GAAW,IAAI,CAAC,IADhB,CADI;aAXN;WA1BA;AA2CA,UAAA,IAAG,GAAG,CAAC,IAAJ,KAAY,IAAZ,IAAqB,GAAG,CAAC,GAAJ,KAAW,IAAnC;AAEC,YAAA,GAAG,CAAC,IAAJ,GAAW,GAAG,CAAC,MAAM,CAAC,IAAX,GAAkB,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAb,GAAqB,CAAtB,CAAlB,GAA6C,CAAC,GAAG,CAAC,MAAM,CAAC,KAAX,GAAmB,CAApB,CAAxD,CAAA;AAAA,YACA,GAAG,CAAC,GAAJ,GAAU,GAAG,CAAC,MAAM,CAAC,GAAX,GAAiB,CAAC,GAAG,CAAC,QAAQ,CAAC,MAAb,GAAsB,CAAvB,CAAjB,GAA6C,CAAC,GAAG,CAAC,MAAM,CAAC,MAAX,GAAoB,CAArB,CADvD,CAFD;WAAA,MAIK,IAAG,GAAG,CAAC,IAAJ,KAAY,IAAf;AAEJ,YAAA,GAAG,CAAC,IAAJ,GAAW,IAAC,CAAA,0BAAD,CAA4B,GAA5B,EAAiC,GAAjC,CAAX,CAFI;WAAA,MAGA,IAAG,GAAG,CAAC,GAAJ,KAAW,IAAd;AAEJ,YAAA,GAAG,CAAC,GAAJ,GAAU,IAAC,CAAA,0BAAD,CAA4B,GAA5B,EAAiC,GAAjC,CAAV,CAFI;WAlDL;AAAA,UAsDA,IAAC,CAAA,GACA,CAAC,QADF,CACW,GAAG,CAAC,IAAJ,IAAY,IAAC,CAAA,aAAa,CAAC,OAAf,CAAuB,cAAvB,EAAuC,GAAG,CAAC,IAA3C,CADvB,CAEC,CAAC,GAFF,CAGE;AAAA,YAAA,GAAA,EAAK,IAAI,CAAC,KAAL,CAAW,GAAG,CAAC,GAAf,CAAA,IAAuB,CAA5B;AAAA,YACA,IAAA,EAAM,IAAI,CAAC,KAAL,CAAW,GAAG,CAAC,IAAf,CAAA,IAAwB,CAD9B;WAHF,CAtDA,CADW;QAAA,CA5BZ;AAAA,QA2FA,oBAAA,EAAsB,SAAC,GAAD,EAAM,IAAN,GAAA;AACrB,cAAA,yBAAA;AAAA,UAAA,KAAA,GAAQ;AAAA,YAAC,CAAA,EAAG,MAAJ;AAAA,YAAY,CAAA,EAAG,KAAf;WAAsB,CAAA,IAAA,CAA9B,CAAA;AAAA,UACA,GAAA,GAAM;AAAA,YAAC,CAAA,EAAG,OAAJ;AAAA,YAAa,CAAA,EAAG,QAAhB;WAA0B,CAAA,IAAA,CADhC,CAAA;AAAA,UAEA,IAAA,GAAO;AAAA,YAAC,CAAA,EAAG,OAAJ;AAAA,YAAa,CAAA,EAAG,QAAhB;WAA0B,CAAA,IAAA,CAFjC,CAAA;AAGA,UAAA,IAAG,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,IAAC,CAAA,MAArB,IAA+B,GAAG,CAAC,MAAO,CAAA,IAAA,CAA7C;AACC,YAAA,OAAA,GACC;AAAA,cAAA,GAAA,EAAK,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,GAAG,CAAC,MAAO,CAAA,KAAA,CAA/B,GAAwC,IAAC,CAAA,MAAzC,GAAkD,GAAG,CAAC,MAAO,CAAA,IAAA,CAAlE;AAAA,cACA,IAAA,EAAM,KADN;aADD,CADD;WAAA,MAIK,IAAG,GAAG,CAAC,QAAS,CAAA,IAAA,CAAb,GAAqB,GAAG,CAAC,MAAO,CAAA,GAAA,CAAhC,GAAuC,IAAC,CAAA,MAAxC,IAAkD,GAAG,CAAC,MAAO,CAAA,IAAA,CAAhE;AACJ,YAAA,OAAA,GACC;AAAA,cAAA,GAAA,EAAK,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,GAAG,CAAC,MAAO,CAAA,GAAA,CAA/B,GAAsC,IAAC,CAAA,MAA5C;AAAA,cACA,IAAA,EAAM,GADN;aADD,CADI;WAPL;iBAWA,QAZqB;QAAA,CA3FtB;AAAA,QAyGA,0BAAA,EAA4B,SAAC,GAAD,EAAM,IAAN,GAAA;AAC3B,cAAA,sBAAA;AAAA,UAAA,KAAA,GAAQ;AAAA,YAAC,CAAA,EAAG,MAAJ;AAAA,YAAY,CAAA,EAAG,KAAf;WAAsB,CAAA,IAAA,CAA9B,CAAA;AAAA,UACA,IAAA,GAAO;AAAA,YAAC,CAAA,EAAG,OAAJ;AAAA,YAAa,CAAA,EAAG,QAAhB;WAA0B,CAAA,IAAA,CADjC,CAAA;AAAA,UAEA,SAAA,GAAY,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,GAAG,CAAC,MAAO,CAAA,KAAA,CAA/B,GAAwC,CAAC,GAAG,CAAC,MAAO,CAAA,IAAA,CAAX,GAAmB,CAApB,CAAxC,GAAiE,CAAC,GAAG,CAAC,MAAO,CAAA,IAAA,CAAX,GAAmB,CAApB,CAF7E,CAAA;iBAGA,IAAI,CAAC,GAAL,CAAS,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,IAAC,CAAA,MAA9B,EAAsC,IAAI,CAAC,GAAL,CAAS,SAAT,EAAoB,GAAG,CAAC,MAAO,CAAA,KAAA,CAAX,GAAoB,GAAG,CAAC,QAAS,CAAA,IAAA,CAAjC,GAAyC,GAAG,CAAC,MAAO,CAAA,IAAA,CAApD,GAA4D,IAAC,CAAA,MAAjF,CAAtC,EAJ2B;QAAA,CAzG5B;OADD,EAXD;IAAA,EADqC;EAAA,CAAtC,CAnCA,CAAA;;AAAA,EA+JA,UAAU,CAAC,OAAX,CAAmB,cAAnB,EAAmC,SAAA,GAAA;AAClC,QAAA,UAAA;AAAA,IAAA,UAAA,GAAa,SAAC,IAAD,GAAA;AAEZ,MAAA,OAAO,CAAC,MAAR,CAAe,IAAf,EACC;AAAA,QAAA,EAAA,EAAQ,IAAA,IAAA,CAAA,CAAM,CAAC,OAAP,CAAA,CAAR;AAAA,QACA,UAAA,EAAY,IADZ;AAAA,QAEA,QAAA,EAAU,IAFV;AAAA,QAGA,IAAA,EAAM;AAAA,UAAC,MAAA,EAAQ,CAAT;SAHN;AAAA,QAIA,IAAA,EAAM,EAJN;AAAA,QAKA,QAAA,EAAU,EALV;OADD,CAAA,CAAA;AAQA,MAAA,IAAG,YAAH;eACC,OAAO,CAAC,MAAR,CAAe,IAAf,EAAkB,IAAlB,EADD;OAVY;IAAA,CAAb,CAAA;AAaA,WAAO,UAAP,CAdkC;EAAA,CAAnC,CA/JA,CAAA;;AAAA,EA+KA,UAAU,CAAC,SAAX,CAAqB,YAArB,EAAmC,SAAC,UAAD,EAAa,QAAb,EAAuB,KAAvB,EAA8B,EAA9B,EAAkC,WAAlC,EAA+C,IAA/C,EAAqD,YAArD,EAAmE,eAAnE,GAAA;AAClC,WAAO;AAAA,MACN,QAAA,EAAU,GADJ;AAAA,MAEN,KAAA,EACC;AAAA,QAAA,IAAA,EAAM,GAAN;AAAA,QACA,WAAA,EAAa,GADb;AAAA,QAEA,OAAA,EAAS,GAFT;AAAA,QAGA,UAAA,EAAY,GAHZ;AAAA,QAIA,gBAAA,EAAkB,GAJlB;AAAA,QAKA,eAAA,EAAiB,GALjB;AAAA,QAMA,YAAA,EAAc,GANd;AAAA,QAOA,YAAA,EAAc,GAPd;AAAA,QAQA,WAAA,EAAa,GARb;OAHK;AAAA,MAYN,QAAA,EAAU,kCAZJ;AAAA,MAaN,OAAA,EAAS,IAbH;AAAA,MAcN,OAAA,EAAS,SAAC,QAAD,EAAW,MAAX,EAAmB,UAAnB,GAAA;eACR,SAAC,MAAD,EAAS,OAAT,EAAkB,KAAlB,GAAA;AACC,cAAA,sRAAA;AAAA,UAAA,YAAA,gDAAoC,EAApC,CAAA;AAAA,UAEA,WAAA,GAAc,IAFd,CAAA;AAAA,UAGA,aAAA,GAAgB,IAHhB,CAAA;AAAA,UAMA,iBAAA,GAAoB,EANpB,CAAA;AAAA,UAOA,mBAAA,GAAsB,EAPtB,CAAA;AAAA,UASA,mBAAA,GAAsB,SAAA,GAAA;AACrB,gBAAA,CAAA;AAAA,YAAA,IAAO,qBAAJ,IAAoB,CAAA,MAAO,CAAC,IAAI,CAAC,MAApC;AACC,oBAAA,CADD;aAAA;AAAA,YAEA,CAAA,GAAI,gBAAA,CAAiB,MAAM,CAAC,IAAxB,EAA8B,MAAM,CAAC,WAArC,CAFJ,CAAA;mBAGA,MAAM,CAAC,OAAP,GAAiB,IAAI,CAAC,WAAL,CAAiB,CAAjB,EAJI;UAAA,CATtB,CAAA;AAAA,UAgBA,MAAM,CAAC,MAAP,CAAc,MAAd,EAAsB,mBAAtB,CAhBA,CAAA;AAAA,UAiBA,MAAM,CAAC,MAAP,CAAc,aAAd,EAA6B,mBAA7B,EAAkD,IAAlD,CAjBA,CAAA;AAAA,UAoBA,OAAA,GACC;AAAA,YAAA,QAAA,EAAU,KAAV;AAAA,YACA,eAAA,EAAiB,EADjB;AAAA,YAEA,gBAAA,EAAkB,EAFlB;AAAA,YAGA,iBAAA,EAAmB,EAHnB;AAAA,YAIA,kBAAA,EAAoB,EAJpB;WArBD,CAAA;AAAA,UA0BA,OAAA,GAAU,OAAO,CAAC,MAAR,CAAe,OAAf,EAAwB,MAAM,CAAC,OAA/B,CA1BV,CAAA;AAAA,UA4BA,UAAA,GAAa,SAAA,GAAA;AACZ,gBAAA,GAAA;AAAA,YAAA,IAAO,mBAAP;AACC,oBAAA,CADD;aAAA;AAAA,YAEA,GAAA,GAAM,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,EAFpC,CAAA;mBAGA,WAAW,CAAC,OAAZ,CAAoB,SAAA,GAAA;AACnB,cAAA,IAAG,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,EAA9B,KAAoC,GAAvC;uBACC,WAAA,GAAc,KADf;eADmB;YAAA,CAApB,EAJY;UAAA,CA5Bb,CAAA;AAAA,UAoCA,YAAA,GAAe,SAAA,GAAA;AACd,gBAAA,OAAA;AAAA,YAAA,OAAA,GAAU,aAAV,CAAA;AACA,YAAA,IAAO,eAAP;AACC,oBAAA,CADD;aADA;mBAGA,OAAO,CAAC,OAAR,CAAgB,SAAA,GAAA;AACf,cAAA,IAAG,aAAA,KAAiB,OAApB;uBACC,aAAA,GAAgB,KADjB;eADe;YAAA,CAAhB,EAJc;UAAA,CApCf,CAAA;AAAA,UA4CA,MAAM,CAAC,GAAP,CAAW,UAAX,EAAuB,SAAA,GAAA;AACtB,YAAA,UAAA,CAAA,CAAA,CAAA;mBACA,YAAA,CAAA,EAFsB;UAAA,CAAvB,CA5CA,CAAA;AAgDA,UAAA,IAAG,OAAO,CAAC,gBAAX;AACC,YAAA,KAAK,CAAC,GAAN,CAAU,OAAO,CAAC,gBAAlB,CAAmC,CAAC,IAApC,CAAyC,SAAC,QAAD,GAAA;qBACxC,iBAAA,GAAoB,QAAQ,CAAC,KADW;YAAA,CAAzC,CAAA,CADD;WAhDA;AAoDA,UAAA,IAAG,OAAO,CAAC,kBAAX;AACC,YAAA,KAAK,CAAC,GAAN,CAAU,OAAO,CAAC,kBAAlB,CAAqC,CAAC,IAAtC,CAA2C,SAAC,QAAD,GAAA;qBAC1C,mBAAA,GAAsB,QAAQ,CAAC,KADW;YAAA,CAA3C,CAAA,CADD;WApDA;AAAA,UAwDA,cAAA,GAAiB,SAAC,UAAD,GAAA;AAChB,gBAAA,yBAAA;AAAA;iBAAS,sEAAT,GAAA;AACC,cAAA,CAAA,GAAI,UAAU,CAAC,QAAS,CAAA,CAAA,CAAxB,CAAA;AAAA,cACA,cAAA,CAAe,CAAf,CADA,CAAA;AAAA,4BAEA,CAAC,CAAC,QAAQ,CAAC,MAAX,CAAkB,CAAlB,EAAqB,CAArB,EAFA,CADD;AAAA;4BADgB;UAAA,CAxDjB,CAAA;AAAA,UA8DA,gBAAA,GAAmB,SAAC,EAAD,EAAK,WAAL,GAAA;AAClB,gBAAA,cAAA;AAAA,iBAAA,0DAAA;iCAAA;AACC,cAAA,gBAAA,CAAiB,EAAjB,EAAqB,CAAC,CAAC,QAAvB,CAAA,CAAA;AAEA,cAAA,IAAG,CAAC,CAAC,EAAF,KAAQ,EAAX;AACC,gBAAA,cAAA,CAAe,CAAf,CAAA,CAAA;AAAA,gBACA,WAAW,CAAC,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,CADA,CAAA;AAEA,sBAAA,CAHD;eAHD;AAAA,aADkB;UAAA,CA9DnB,CAAA;AAAA,UAuEA,gBAAA,GAAmB,SAAA,GAAA;AAClB,gBAAA,sIAAA;AAAA,YAAA,UAAA,GAAiB,IAAA,YAAA,CAAA,CAAjB,CAAA;AAAA,YACA,GAAA,GAAM,MAAM,CAAC,YAAP,CAAA,CADN,CAAA;AAGA,YAAA,IAAG,GAAG,CAAC,WAAP;AACC,oBAAU,IAAA,KAAA,CAAM,8BAAN,CAAV,CADD;aAHA;AAAA,YAMA,KAAA,GAAQ,GAAG,CAAC,UAAJ,CAAe,CAAf,CANR,CAAA;AAQA,YAAA,IAAG,KAAK,CAAC,cAAN,KAA0B,KAAK,CAAC,YAAnC;AACC,oBAAU,IAAA,KAAA,CAAM,mCAAN,CAAV,CADD;aARA;AAWA,YAAA,IAAG,KAAK,CAAC,cAAc,CAAC,UAAU,CAAC,QAAhC,KAA4C,MAA/C;AACC,cAAA,QAAA,GAAc,qFAAH,GAAuF,QAAA,CAAS,MAAT,EAAiB,EAAjB,CAAvF,GAAA,MAAX,CAAA;AACA,cAAA,IAAG,QAAA,KAAY,MAAf;AACC,sBAAU,IAAA,KAAA,CAAM,+BAAN,CAAV,CADD;eADA;AAAA,cAGA,gBAAA,GAAmB,iBAAA,CAAkB,MAAM,CAAC,WAAzB,EAAsC,QAAtC,CAHnB,CAAA;AAAA,cAKA,0BAAA,GAA6B,gBAAgB,CAAC,QAL9C,CADD;aAAA,MAAA;AAQC,cAAA,0BAAA,GAA6B,MAAM,CAAC,WAApC,CARD;aAXA;AAsBA,YAAA,IAAG,0BAA0B,CAAC,MAA9B;AAEC,cAAA,eAAA,GAAkB,KAAK,CAAC,cAAc,CAAC,eAAvC,CAAA;AACA,cAAA,IAAG,uBAAH;AACC,gBAAA,aAAA,GAAmB,qEAAH,GAAuE,QAAA,CAAS,MAAT,EAAiB,EAAjB,CAAvE,GAAA,MAAhB,CAAA;AACA,gBAAA,IAAO,qBAAP;AACC,wBAAU,IAAA,KAAA,CAAM,+BAAN,CAAV,CADD;iBADA;AAAA,gBAIA,cAAA,GAAiB,iBAAA,CAAkB,MAAM,CAAC,WAAzB,EAAsC,aAAtC,CAJjB,CAAA;AAAA,gBAKA,UAAU,CAAC,UAAX,GAAwB,cAAc,CAAC,QAAf,GAA0B,KAAK,CAAC,WALxD,CAAA;AAAA,gBAMA,UAAU,CAAC,QAAX,GAAsB,cAAc,CAAC,QAAf,GAA0B,KAAK,CAAC,SANtD,CADD;eAAA,MAAA;AAUC,gBAAA,UAAU,CAAC,UAAX,GAAwB,KAAK,CAAC,WAA9B,CAAA;AAAA,gBACA,UAAU,CAAC,QAAX,GAAsB,KAAK,CAAC,SAD5B,CAVD;eAHD;aAAA,MAAA;AAiBC,cAAA,UAAU,CAAC,UAAX,GAAwB,KAAK,CAAC,WAA9B,CAAA;AAAA,cACA,UAAU,CAAC,QAAX,GAAsB,KAAK,CAAC,SAD5B,CAjBD;aAtBA;AAAA,YA0CA,0BAA0B,CAAC,IAA3B,CAAgC,UAAhC,CA1CA,CAAA;AAAA,YA2CA,cAAA,CAAA,CA3CA,CAAA;AA4CA,mBAAO,UAAP,CA7CkB;UAAA,CAvEnB,CAAA;AAAA,UAsHA,cAAA,GAAiB,SAAA,GAAA;AAChB,YAAA,IAAG,QAAQ,CAAC,SAAZ;qBACC,QAAQ,CAAC,SAAS,CAAC,KAAnB,CAAA,EADD;aAAA,MAEK,IAAG,MAAM,CAAC,YAAP,IAAwB,MAAM,CAAC,YAAP,CAAA,CAAqB,CAAC,KAAjD;qBACJ,MAAM,CAAC,YAAP,CAAA,CAAqB,CAAC,KAAtB,CAAA,EADI;aAAA,MAEA,IAAG,MAAM,CAAC,YAAP,IAAwB,MAAM,CAAC,YAAP,CAAA,CAAqB,CAAC,eAAjD;qBACJ,MAAM,CAAC,YAAP,CAAA,CAAqB,CAAC,eAAtB,CAAA,EADI;aALW;UAAA,CAtHjB,CAAA;AAAA,UA8HA,QAAA,GAAW,SAAC,KAAD,GAAA;AACV,gBAAA,qBAAA;AAAA,YAAA,IAAG,iBAAiB,CAAC,MAAlB,KAA4B,CAA/B;AACC,oBAAA,CADD;aAAA;AAGA;AACC,cAAA,UAAA,GAAa,gBAAA,CAAA,CAAb,CAAA;AAAA,cACA,MAAM,CAAC,MAAP,CAAA,CADA,CAAA;AAAA,cAEA,KAAA,GAAQ,OAAO,CAAC,IAAR,CAAa,eAAA,GAAkB,UAAU,CAAC,EAA1C,CAFR,CADD;aAAA,cAAA;AAKC,cADK,WACL,CAAA;AAAA,cAAA,IAAG,8BAAH;AACC,gBAAA,MAAM,CAAC,eAAP,CAAuB,EAAvB,CAAA,CADD;eAAA;AAGA,oBAAA,CARD;aAHA;AAAA,YAaA,UAAA,CAAA,CAbA,CAAA;AAAA,YAcA,YAAA,CAAA,CAdA,CAAA;mBAgBA,mBAAA,CAAoB,UAApB,EAAgC,KAAhC,EAAuC,IAAvC,EAjBU;UAAA,CA9HX,CAAA;AAAA,UAiJA,OAAA,GAAU,SAAC,KAAD,GAAA;AACT,gBAAA,qCAAA;AAAA,YAAA,IAAG,iBAAiB,CAAC,MAAlB,KAA4B,CAA/B;AACC,oBAAA,CADD;aAAA;AAAA,YAGA,OAAA,GAAU,OAAO,CAAC,OAAR,CAAgB,KAAK,CAAC,MAAtB,CAHV,CAAA;AAAA,YAIA,QAAA,GAAc,qDAAH,GAAuD,QAAA,CAAS,MAAT,EAAiB,EAAjB,CAAvD,GAAA,MAJX,CAAA;AAMA,YAAA,IAAO,gBAAP;AACC,oBAAA,CADD;aANA;AASA,YAAA,IAAG,qBAAA,IAAiB,WAAW,CAAC,KAAK,CAAC,WAAW,CAAC,EAA9B,KAAoC,QAAxD;AACC,cAAA,UAAA,CAAA,CAAA,CAAA;AACA,oBAAA,CAFD;aATA;AAAA,YAYA,UAAA,GAAa,iBAAA,CAAkB,MAAM,CAAC,WAAzB,EAAsC,QAAtC,CAZb,CAAA;AAAA,YAcA,UAAA,CAAA,CAdA,CAAA;AAAA,YAeA,YAAA,CAAA,CAfA,CAAA;mBAiBA,mBAAA,CAAoB,UAApB,EAAgC,OAAhC,EAAyC,KAAzC,EAlBS;UAAA,CAjJV,CAAA;AAAA,UAqKA,YAAA,GAAe,SAAC,KAAD,GAAA;AACd,gBAAA,kEAAA;AAAA,YAAA,IAAG,mBAAmB,CAAC,MAApB,KAA8B,CAAjC;AACC,oBAAA,CADD;aAAA;AAAA,YAGA,KAAK,CAAC,eAAN,CAAA,CAHA,CAAA;AAAA,YAIA,OAAA,GAAU,OAAO,CAAC,OAAR,CAAgB,KAAK,CAAC,MAAtB,CAJV,CAAA;AAAA,YAKA,QAAA,GAAc,qDAAH,GAAuD,QAAA,CAAS,MAAT,EAAiB,EAAjB,CAAvD,GAAA,MALX,CAAA;AAOA,YAAA,IAAG,uBAAA,IAAmB,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,EAAhC,KAAsC,QAA5D;AACC,cAAA,aAAa,CAAC,WAAd,CAAA,CAAA,CAAA;AACA,oBAAA,CAFD;aAAA,MAAA;AAIC,cAAA,YAAA,CAAA,CAAA,CAJD;aAPA;AAaA,YAAA,IAAO,gBAAP;AACC,oBAAA,CADD;aAbA;AAAA,YAgBA,UAAA,GAAa,iBAAA,CAAkB,MAAM,CAAC,WAAzB,EAAsC,QAAtC,CAhBb,CAAA;AAmBA,YAAA,IAAG,mBAAH;AACC,oBAAA,CADD;aAnBA;AAAA,YAsBA,OAAA,GAAc,IAAA,eAAA,CACb;AAAA,cAAA,KAAA,EAAO,UAAU,CAAC,IAAX,CAAA,CAAP;AAAA,cACA,QAAA,EAAU,qCADV;AAAA,cAEA,aAAA,EAAe,oEAFf;AAAA,cAGA,OAAA,EAAS,OAHT;AAAA,cAIA,aAAA,EAAe,GAJf;AAAA,cAKA,MAAA,EAAQ,YALR;aADa,CAtBd,CAAA;AAAA,YA6BA,OAAO,CAAC,KAAK,CAAC,WAAd,GAA4B,UA7B5B,CAAA;AAAA,YA+BA,aAAA,GAAgB,OA/BhB,CAAA;AAAA,YAiCA,MAAA,GACC;AAAA,cAAA,MAAA,EAAQ,OAAO,CAAC,KAAhB;AAAA,cACA,SAAA,EAAW,mBADX;aAlCD,CAAA;AAAA,YAqCA,OAAO,CAAC,GAAG,CAAC,IAAZ,CAAiB,MAAM,CAAC,SAAxB,CArCA,CAAA;AAAA,YAsCA,OAAO,CAAC,GAAG,CAAC,QAAZ,CAAqB,MAArB,CAtCA,CAAA;AAwCA,YAAA,IAAG,OAAO,CAAC,iBAAX;AACC,cAAA,UAAA,GAAa,WAAA,CAAY,OAAO,CAAC,iBAApB,EAAuC,MAAvC,CAAb,CAAA;AAAA,cACA,OAAO,CAAC,GAAG,CAAC,IAAZ,CAAiB,yBAAjB,EAA4C,UAA5C,CADA,CAAA;AAAA,cAEA,OAAO,CAAC,GAAG,CAAC,QAAZ,CAAA,CAAsB,CAAC,IAAvB,CAA4B,yBAA5B,EAAuD,UAAvD,CAFA,CADD;aAxCA;AAAA,YA6CA,QAAA,CAAS,OAAO,CAAC,GAAjB,CAAA,CAAsB,OAAO,CAAC,KAA9B,CA7CA,CAAA;AAAA,YA8CA,OAAO,CAAC,KAAK,CAAC,MAAd,CAAA,CA9CA,CAAA;mBA+CA,OAAO,CAAC,IAAR,CAAA,EAhDc;UAAA,CArKf,CAAA;AAAA,UAuNA,YAAA,GAAe,SAAC,KAAD,GAAA;AACd,gBAAA,yBAAA;AAAA,YAAA,KAAK,CAAC,eAAN,CAAA,CAAA,CAAA;AAAA,YAEA,OAAA,GAAU,OAAO,CAAC,OAAR,CAAgB,KAAK,CAAC,MAAtB,CAFV,CAAA;AAAA,YAGA,QAAA,GAAc,qDAAH,GAAuD,QAAA,CAAS,MAAT,EAAiB,EAAjB,CAAvD,GAAA,MAHX,CAAA;AAKA,YAAA,IAAO,gBAAP;AACC,oBAAA,CADD;aALA;mBAQA,YAAA,CAAA,EATc;UAAA,CAvNf,CAAA;AAAA,UAkOA,mBAAA,GAAsB,SAAC,UAAD,EAAa,MAAb,EAAqB,KAArB,GAAA;AACrB,gBAAA,yBAAA;AAAA,YAAA,KAAA,GAAY,IAAA,eAAA,CACX;AAAA,cAAA,KAAA,EAAO,UAAU,CAAC,IAAX,CAAA,CAAP;AAAA,cACA,SAAA,EACC;AAAA,gBAAA,IAAA,EAAM,MAAM,CAAC,YAAb;AAAA,gBACA,IAAA,EAAM,MAAM,CAAC,YADb;eAFD;AAAA,cAIA,QAAA,EAAU,mCAJV;AAAA,cAKA,aAAA,EAAe,gEALf;AAAA,cAMA,OAAA,EAAS,MANT;AAAA,cAOA,MAAA,EAAQ,YAPR;aADW,CAAZ,CAAA;AAAA,YAUA,KAAK,CAAC,KAAK,CAAC,MAAZ,GAAqB,KAVrB,CAAA;AAAA,YAWA,KAAK,CAAC,KAAK,CAAC,WAAZ,GAA0B,UAX1B,CAAA;AAAA,YAYA,KAAK,CAAC,KAAK,CAAC,SAAZ,GAAwB,OAAO,CAAC,QAZhC,CAAA;AAAA,YAcA,KAAK,CAAC,KAAK,CAAC,OAAZ,GAAsB,SAAA,GAAA;AACrB,cAAA,gBAAA,CAAiB,UAAU,CAAC,EAA5B,EAAgC,MAAM,CAAC,WAAvC,CAAA,CAAA;AAEA,cAAA,IAAG,+BAAH;AACC,gBAAA,MAAM,CAAC,gBAAP,CAAwB,UAAxB,CAAA,CADD;eAFA;AAAA,cAIA,UAAA,CAAA,CAJA,CADqB;YAAA,CAdtB,CAAA;AAAA,YAsBA,KAAK,CAAC,KAAK,CAAC,MAAZ,GAAqB,SAAA,GAAA;AACpB,cAAA,IAAG,yBAAH;AACC,gBAAA,MAAM,CAAC,UAAP,CAAkB,KAAK,CAAC,KAAK,CAAC,WAA9B,CAAA,CADD;eAAA;AAAA,cAEA,UAAA,CAAA,CAFA,CADoB;YAAA,CAtBrB,CAAA;AAAA,YA4BA,WAAA,GAAc,KA5Bd,CAAA;AAAA,YA8BA,MAAA,GACC;AAAA,cAAA,MAAA,EAAQ,KAAK,CAAC,KAAd;AAAA,cACA,SAAA,EAAW,iBADX;aA/BD,CAAA;AAAA,YAkCA,KAAK,CAAC,GAAG,CAAC,IAAV,CAAe,MAAM,CAAC,SAAtB,CAlCA,CAAA;AAAA,YAmCA,KAAK,CAAC,GAAG,CAAC,QAAV,CAAmB,MAAnB,CAnCA,CAAA;AAqCA,YAAA,IAAG,OAAO,CAAC,eAAX;AACC,cAAA,UAAA,GAAa,WAAA,CAAY,OAAO,CAAC,eAApB,EAAqC,MAArC,CAAb,CAAA;AAAA,cACA,KAAK,CAAC,GAAG,CAAC,IAAV,CAAe,yBAAf,EAA0C,UAA1C,CADA,CAAA;AAAA,cAEA,KAAK,CAAC,GAAG,CAAC,QAAV,CAAA,CAAoB,CAAC,IAArB,CAA0B,yBAA1B,EAAqD,UAArD,CAFA,CADD;aArCA;AAAA,YA0CA,QAAA,CAAS,KAAK,CAAC,GAAf,CAAA,CAAoB,KAAK,CAAC,KAA1B,CA1CA,CAAA;AAAA,YA2CA,KAAK,CAAC,KAAK,CAAC,MAAZ,CAAA,CA3CA,CAAA;mBA4CA,KAAK,CAAC,IAAN,CAAA,EA7CqB;UAAA,CAlOtB,CAAA;AAAA,UAiRA,OAAO,CAAC,EAAR,CAAW,YAAX,EAAyB,MAAzB,EAAiC,YAAjC,CAjRA,CAAA;AAAA,UAkRA,OAAO,CAAC,EAAR,CAAW,YAAX,EAAyB,MAAzB,EAAiC,YAAjC,CAlRA,CAAA;iBAoRA,OAAO,CAAC,EAAR,CAAW,SAAX,EAAsB,SAAC,KAAD,GAAA;AAGrB,gBAAA,SAAA;AAAA,YAAA,SAAA,GAAY,MAAM,CAAC,YAAP,CAAA,CAAZ,CAAA;AACA,YAAA,IAAG,CAAA,SAAU,CAAC,WAAX,IAA2B,CAAA,OAAQ,CAAC,QAAvC;qBAEC,QAAA,CAAS,KAAT,EAFD;aAAA,MAGK,IAAG,SAAS,CAAC,WAAV,IAA0B,KAAK,CAAC,MAAM,CAAC,QAAb,KAAyB,MAAtD;qBACJ,OAAA,CAAQ,KAAR,EADI;aAAA,MAEA,IAAG,SAAS,CAAC,WAAb;AACJ,cAAA,YAAA,CAAA,CAAA,CAAA;qBACA,UAAA,CAAA,EAFI;aATgB;UAAA,CAAtB,EArRD;QAAA,EADQ;MAAA,CAdH;KAAP,CADkC;EAAA,CAAnC,CA/KA,CAAA;AAAA","file":"ng-annotate-latest.js","sourceRoot":"/source/","sourcesContent":["ngAnnotate = angular.module \"ngAnnotate\", []\n\ninsertAt = (text, index, string)->\n\treturn text.substr(0, index) + string + text.substr(index)\n\nsortAnnotationsByEndIndex = (annotations)->\n\treturn annotations.sort (a, b)->\n\t\tif a.endIndex < b.endIndex\n\t\t\treturn -1\n\t\telse if a.endIndex > b.endIndex\n\t\t\treturn 1\n\t\treturn 0\n\nparseAnnotations = (text, annotations = [], indexOffset = 0)->\n\tif annotations.length is 0\n\t\treturn text\n\tannotations = sortAnnotationsByEndIndex annotations\n\n\tfor i in [annotations.length - 1..0] by -1\n\t\tannotation = annotations[i];\n\t\ttext = insertAt text, annotation.endIndex + indexOffset, \"</span>\"\n\t\tif annotation.children.length\n\t\t\ttext = parseAnnotations text, annotation.children, annotation.startIndex + indexOffset\n\t\ttext = insertAt text, annotation.startIndex + indexOffset, \"<span class=\\\"ng-annotate-annotation ng-annotate-\" + annotation.id + \" ng-annotate-type-\" + annotation.type + \"\\\" data-annotation-id=\\\"\" + annotation.id + \"\\\">\"\n\treturn text\n\ngetAnnotationById = (annotations, aId)->\n\tfor a in annotations\n\t\tif aId is a.id\n\t\t\treturn a\n\t\tif a.children.length > 0\n\t\t\tan = getAnnotationById a.children, aId\n\t\t\tif an isnt undefined\n\t\t\t\treturn an\n\nngAnnotate.factory \"NGAnnotatePopup\", ->\n\t(args) ->\n\t\targs = angular.extend {\n\t\t\tscope: null,\n\t\t\tcallbacks: {},\n\t\t\ttemplate: \"<div/>\"\n\t\t\t$anchor: null\n\t\t\tpreferredAxis: 'x'\n\t\t\toffset: 0\n\t\t\tpositionClass: '{{position}}'\n\t\t}, args\n\n\t\tangular.extend @, args,\n\t\t\t$el: angular.element args.template\n\n\t\t\tshow: (speed = \"fast\") ->\n\t\t\t\t@$el.fadeIn speed\n\t\t\t\t@reposition()\n\t\t\t\tif typeof @callbacks.show is \"function\"\n\t\t\t\t\t@callbacks.show @$el\n\n\t\t\thide: (speed = \"fast\")->\n\t\t\t\t@$el.fadeOut speed\n\t\t\t\tif typeof @callbacks.hide is \"function\"\n\t\t\t\t\t@callbacks.hide @$el\n\n\t\t\tisVisible: ->\n\t\t\t\treturn @$el.is \":visible\"\n\n\t\t\tdestroy: (cb = angular.noop)->\n\t\t\t\tscope = @scope\n\t\t\t\t$el = @$el\n\t\t\t\t@hide ->\n\t\t\t\t\tif typeof cb is \"function\"\n\t\t\t\t\t\tcb()\n\t\t\t\t\tscope.$destroy()\n\t\t\t\t\t$el.remove()\n\n\t\t\tstopDestroy: ->\n\t\t\t\t@$el.stop(true).show(\"fast\")\n\n\t\t\treposition: ->\n\t\t\t\ttargetEl = @$el[0]\n\t\t\t\tanchorEl = @$anchor[0]\n\n\t\t\t\tif not (targetEl or anchorEl)\n\t\t\t\t\treturn\n\n\t\t\t\tpos =\n\t\t\t\t\tleft: null\n\t\t\t\t\ttop: null\n\t\t\t\t\ttarget: targetEl.getBoundingClientRect()\n\t\t\t\t\tanchor: anchorEl.getBoundingClientRect()\n\t\t\t\t\tviewport:\n\t\t\t\t\t\twidth: window.innerWidth\n\t\t\t\t\t\theight: window.innerHeight\n\t\t\t\t\tscroll:\n\t\t\t\t\t\ttop: document.body.scrollTop\n\t\t\t\t\t\tleft: document.body.scrollLeft\n\n\t\t\t\tif not (pos.target.width > 0 and pos.target.height > 0)\n\t\t\t\t\treturn\n\n\t\t\t\t# Find first axis position\n\n\t\t\t\tposX = @getNewPositionOnAxis pos, 'x'\n\t\t\t\tposY = @getNewPositionOnAxis pos, 'y'\n\n\t\t\t\tif @preferredAxis is 'x'\n\t\t\t\t\tif posX and typeof posX.pos is 'number'\n\t\t\t\t\t\tpos.left = posX.pos\n\t\t\t\t\t\tpos.edge = posX.edge\n\t\t\t\t\telse if posY\n\t\t\t\t\t\tpos.top = posY.pos\n\t\t\t\t\t\tpos.edge = posY.edge\n\t\t\t\telse\n\t\t\t\t\tif posY and typeof posY.pos is 'number'\n\t\t\t\t\t\tpos.top = posY.pos\n\t\t\t\t\t\tpos.edge = posY.edge\n\t\t\t\t\telse if posX\n\t\t\t\t\t\tpos.left = posX.pos\n\t\t\t\t\t\tpos.edge = posX.edge\n\n\t\t\t\t# Center on second axis\n\n\t\t\t\tif pos.left is null and pos.top is null\n\t\t\t\t\t# Center on X and Y axes\n\t\t\t\t\tpos.left = pos.scroll.left + (pos.viewport.width / 2) - (pos.target.width / 2)\n\t\t\t\t\tpos.top = pos.scroll.top + (pos.viewport.height / 2) - (pos.target.height / 2)\n\t\t\t\telse if pos.left is null\n\t\t\t\t\t# Center on X axis\n\t\t\t\t\tpos.left = @getNewCenterPositionOnAxis pos, 'x'\n\t\t\t\telse if pos.top is null\n\t\t\t\t\t# Center on Y axis\n\t\t\t\t\tpos.top = @getNewCenterPositionOnAxis pos, 'y'\n\n\t\t\t\t@$el\n\t\t\t\t\t.addClass pos.edge && @positionClass.replace \"{{position}}\", pos.edge\n\t\t\t\t\t.css\n\t\t\t\t\t\ttop: Math.round(pos.top) || 0\n\t\t\t\t\t\tleft: Math.round(pos.left) || 0\n\n\t\t\t\treturn\n\n\t\t\tgetNewPositionOnAxis: (pos, axis) ->\n\t\t\t\tstart = {x: 'left', y: 'top'}[axis]\n\t\t\t\tend = {x: 'right', y: 'bottom'}[axis]\n\t\t\t\tsize = {x: 'width', y: 'height'}[axis]\n\t\t\t\tif pos.anchor[start] - @offset >= pos.target[size]\n\t\t\t\t\taxisPos =\n\t\t\t\t\t\tpos: pos.scroll[start] + pos.anchor[start] - @offset - pos.target[size]\n\t\t\t\t\t\tedge: start\n\t\t\t\telse if pos.viewport[size] - pos.anchor[end] - @offset >= pos.target[size]\n\t\t\t\t\taxisPos =\n\t\t\t\t\t\tpos: pos.scroll[start] + pos.anchor[end] + @offset\n\t\t\t\t\t\tedge: end\n\t\t\t\taxisPos\n\n\t\t\tgetNewCenterPositionOnAxis: (pos, axis) ->\n\t\t\t\tstart = {x: 'left', y: 'top'}[axis]\n\t\t\t\tsize = {x: 'width', y: 'height'}[axis]\n\t\t\t\tcenterPos = pos.scroll[start] + pos.anchor[start] + (pos.anchor[size] / 2) - (pos.target[size] / 2)\n\t\t\t\tMath.max(pos.scroll[start] + @offset, Math.min(centerPos, pos.scroll[start] + pos.viewport[size] - pos.target[size] - @offset))\n\nngAnnotate.factory \"NGAnnotation\", ->\n\tAnnotation = (data)->\n\n\t\tangular.extend @,\n\t\t\tid: new Date().getTime(),\n\t\t\tstartIndex: null\n\t\t\tendIndex: null\n\t\t\tdata: {points: 0}\n\t\t\ttype: \"\"\n\t\t\tchildren: []\n\n\t\tif data?\n\t\t\tangular.extend @, data\n\n\treturn Annotation\n\nngAnnotate.directive \"ngAnnotate\", ($rootScope, $compile, $http, $q, $controller, $sce, NGAnnotation, NGAnnotatePopup)->\n\treturn {\n\t\trestrict: \"E\"\n\t\tscope:\n\t\t\ttext: \"=\"\n\t\t\tannotations: \"=\"\n\t\t\toptions: \"=\"\n\t\t\tonAnnotate: \"=\"\n\t\t\tonAnnotateDelete: \"=\"\n\t\t\tonAnnotateError: \"=\"\n\t\t\tonEditorShow: \"=\"\n\t\t\tonEditorHide: \"=\"\n\t\t\tpopupOffset: \"=\"\n\t\ttemplate: \"<p ng-bind-html=\\\"content\\\"></p>\"\n\t\treplace: true\n\t\tcompile: (tElement, tAttrs, transclude)->\n\t\t\t($scope, element, attrs)->\n\t\t\t\tPOPUP_OFFSET = $scope.popupOffset ? 10\n\n\t\t\t\tactivePopup = null\n\t\t\t\tactiveTooltip = null\n\n\t\t\t\t# Cache the template when we fetch it\n\t\t\t\tpopupTemplateData = \"\"\n\t\t\t\ttooltipTemplateData = \"\"\n\n\t\t\t\tonAnnotationsChange = ->\n\t\t\t\t\tif not $scope.text? or !$scope.text.length\n\t\t\t\t\t\treturn\n\t\t\t\t\tt = parseAnnotations $scope.text, $scope.annotations\n\t\t\t\t\t$scope.content = $sce.trustAsHtml t\n\n\t\t\t\t# Annotation parsing\n\t\t\t\t$scope.$watch \"text\", onAnnotationsChange\n\t\t\t\t$scope.$watch \"annotations\", onAnnotationsChange, true\n\n\t\t\t\t# Setting options\n\t\t\t\toptions =\n\t\t\t\t\treadonly: false\n\t\t\t\t\tpopupController: \"\"\n\t\t\t\t\tpopupTemplateUrl: \"\"\n\t\t\t\t\ttooltipController: \"\"\n\t\t\t\t\ttooltipTemplateUrl: \"\"\n\t\t\t\toptions = angular.extend options, $scope.options\n\n\t\t\t\tclearPopup = ->\n\t\t\t\t\tif not activePopup?\n\t\t\t\t\t\treturn\n\t\t\t\t\ttId = activePopup.scope.$annotation.id\n\t\t\t\t\tactivePopup.destroy ->\n\t\t\t\t\t\tif activePopup.scope.$annotation.id is tId\n\t\t\t\t\t\t\tactivePopup = null\n\n\t\t\t\tclearTooltip = ->\n\t\t\t\t\ttooltip = activeTooltip\n\t\t\t\t\tif not tooltip?\n\t\t\t\t\t\treturn\n\t\t\t\t\ttooltip.destroy ->\n\t\t\t\t\t\tif activeTooltip is tooltip\n\t\t\t\t\t\t\tactiveTooltip = null\n\n\t\t\t\t$scope.$on \"$destroy\", ->\n\t\t\t\t\tclearPopup()\n\t\t\t\t\tclearTooltip()\n\n\t\t\t\tif options.popupTemplateUrl\n\t\t\t\t\t$http.get(options.popupTemplateUrl).then (response)->\n\t\t\t\t\t\tpopupTemplateData = response.data\n\n\t\t\t\tif options.tooltipTemplateUrl\n\t\t\t\t\t$http.get(options.tooltipTemplateUrl).then (response)->\n\t\t\t\t\t\ttooltipTemplateData = response.data\n\n\t\t\t\tremoveChildren = (annotation)->\n\t\t\t\t\tfor i in [annotation.children.length - 1..0] by -1\n\t\t\t\t\t\ta = annotation.children[i]\n\t\t\t\t\t\tremoveChildren a\n\t\t\t\t\t\ta.children.splice i, 1\n\n\t\t\t\tremoveAnnotation = (id, annotations)->\n\t\t\t\t\tfor a, i in annotations\n\t\t\t\t\t\tremoveAnnotation id, a.children\n\n\t\t\t\t\t\tif a.id is id\n\t\t\t\t\t\t\tremoveChildren a\n\t\t\t\t\t\t\tannotations.splice i, 1\n\t\t\t\t\t\t\treturn\n\n\t\t\t\tcreateAnnotation = ->\n\t\t\t\t\tannotation = new NGAnnotation()\n\t\t\t\t\tsel = window.getSelection()\n\n\t\t\t\t\tif sel.isCollapsed\n\t\t\t\t\t\tthrow new Error \"NG_ANNOTATE_NO_TEXT_SELECTED\"\n\n\t\t\t\t\trange = sel.getRangeAt 0\n\n\t\t\t\t\tif range.startContainer isnt range.endContainer\n\t\t\t\t\t\tthrow new Error \"NG_ANNOTATE_PARTIAL_NODE_SELECTED\"\n\n\t\t\t\t\tif range.startContainer.parentNode.nodeName is \"SPAN\" # Is a child annotation\n\t\t\t\t\t\tparentId = if (attrId = range.startContainer.parentNode.getAttribute(\"data-annotation-id\"))? then parseInt(attrId, 10)\n\t\t\t\t\t\tif parentId is undefined\n\t\t\t\t\t\t\tthrow new Error \"NG_ANNOTATE_ILLEGAL_SELECTION\"\n\t\t\t\t\t\tparentAnnotation = getAnnotationById $scope.annotations, parentId\n\n\t\t\t\t\t\tannotationParentCollection = parentAnnotation.children\n\t\t\t\t\telse\n\t\t\t\t\t\tannotationParentCollection = $scope.annotations\n\n\t\t\t\t\t# Does this selection has any siblings?\n\t\t\t\t\tif annotationParentCollection.length\n\t\t\t\t\t\t# Yup, find the previous sibling\n\t\t\t\t\t\tprevSiblingSpan = range.startContainer.previousSibling\n\t\t\t\t\t\tif prevSiblingSpan?\n\t\t\t\t\t\t\tprevSiblingId = if (attrId = prevSiblingSpan.getAttribute(\"data-annotation-id\"))? then parseInt(attrId, 10)\n\t\t\t\t\t\t\tif not prevSiblingId?\n\t\t\t\t\t\t\t\tthrow new Error \"NG_ANNOTATE_ILLEGAL_SELECTION\"\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tprevAnnotation = getAnnotationById $scope.annotations, prevSiblingId\n\t\t\t\t\t\t\tannotation.startIndex = prevAnnotation.endIndex + range.startOffset\n\t\t\t\t\t\t\tannotation.endIndex = prevAnnotation.endIndex + range.endOffset\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\t# Doesn't have a prev sibling, alrighty then\n\t\t\t\t\t\t\tannotation.startIndex = range.startOffset\n\t\t\t\t\t\t\tannotation.endIndex = range.endOffset\n\t\t\t\t\telse\n\t\t\t\t\t\t# Nope\n\t\t\t\t\t\tannotation.startIndex = range.startOffset\n\t\t\t\t\t\tannotation.endIndex = range.endOffset\n\n\t\t\t\t\tannotationParentCollection.push annotation\n\t\t\t\t\tclearSelection()\n\t\t\t\t\treturn annotation\n\n\t\t\t\tclearSelection = ->\n\t\t\t\t\tif document.selection\n\t\t\t\t\t\tdocument.selection.empty() # Internet Explorer\n\t\t\t\t\telse if window.getSelection and window.getSelection().empty\n\t\t\t\t\t\twindow.getSelection().empty() # Chrome\n\t\t\t\t\telse if window.getSelection and window.getSelection().removeAllRanges\n\t\t\t\t\t\twindow.getSelection().removeAllRanges() # Firefox\n\n\t\t\t\tonSelect = (event)->\n\t\t\t\t\tif popupTemplateData.length is 0\n\t\t\t\t\t\treturn\n\n\t\t\t\t\ttry\n\t\t\t\t\t\tannotation = createAnnotation()\n\t\t\t\t\t\t$scope.$apply()\n\t\t\t\t\t\t$span = element.find \".ng-annotate-\" + annotation.id\n\t\t\t\t\tcatch ex\n\t\t\t\t\t\tif $scope.onAnnotateError?\n\t\t\t\t\t\t\t$scope.onAnnotateError ex\n\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tclearPopup()\n\t\t\t\t\tclearTooltip()\n\n\t\t\t\t\tloadAnnotationPopup annotation, $span, true\n\n\t\t\t\tonClick = (event)->\t\t\t\t\t\n\t\t\t\t\tif popupTemplateData.length is 0\n\t\t\t\t\t\treturn\n\n\t\t\t\t\t$target = angular.element event.target\n\t\t\t\t\ttargetId = if (attrId = $target.attr(\"data-annotation-id\"))? then parseInt(attrId, 10)\n\n\t\t\t\t\tif not targetId?\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tif activePopup? and activePopup.scope.$annotation.id is targetId\n\t\t\t\t\t\tclearPopup()\n\t\t\t\t\t\treturn\n\t\t\t\t\tannotation = getAnnotationById $scope.annotations, targetId\n\n\t\t\t\t\tclearPopup()\n\t\t\t\t\tclearTooltip()\n\n\t\t\t\t\tloadAnnotationPopup annotation, $target, false\n\n\t\t\t\tonMouseEnter = (event)->\n\t\t\t\t\tif tooltipTemplateData.length is 0\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tevent.stopPropagation()\n\t\t\t\t\t$target = angular.element event.target\n\t\t\t\t\ttargetId = if (attrId = $target.attr(\"data-annotation-id\"))? then parseInt(attrId, 10)\n\n\t\t\t\t\tif activeTooltip? and activeTooltip.scope.$annotation.id is targetId\n\t\t\t\t\t\tactiveTooltip.stopDestroy()\n\t\t\t\t\t\treturn\n\t\t\t\t\telse\n\t\t\t\t\t\tclearTooltip()\n\n\t\t\t\t\tif not targetId?\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tannotation = getAnnotationById $scope.annotations, targetId\n\n\t\t\t\t\t# We don't want to show the tooltip if a popup with the annotation is open\n\t\t\t\t\tif activePopup?\n\t\t\t\t\t\treturn\n\n\t\t\t\t\ttooltip = new NGAnnotatePopup\n\t\t\t\t\t\tscope: $rootScope.$new()\n\t\t\t\t\t\ttemplate: \"<div class='ng-annotate-tooltip' />\"\n\t\t\t\t\t\tpositionClass: \"ng-annotate-tooltip-docked ng-annotate-tooltip-docked-{{position}}\"\n\t\t\t\t\t\t$anchor: $target\n\t\t\t\t\t\tpreferredAxis: 'y'\n\t\t\t\t\t\toffset: POPUP_OFFSET\n\t\t\t\t\ttooltip.scope.$annotation = annotation\n\n\t\t\t\t\tactiveTooltip = tooltip\n\n\t\t\t\t\tlocals =\n\t\t\t\t\t\t$scope: tooltip.scope\n\t\t\t\t\t\t$template: tooltipTemplateData\n\n\t\t\t\t\ttooltip.$el.html locals.$template\n\t\t\t\t\ttooltip.$el.appendTo \"body\"\n\n\t\t\t\t\tif options.tooltipController\n\t\t\t\t\t\tcontroller = $controller options.tooltipController, locals\n\t\t\t\t\t\ttooltip.$el.data \"$ngControllerController\", controller\n\t\t\t\t\t\ttooltip.$el.children().data \"$ngControllerController\", controller\n\n\t\t\t\t\t$compile(tooltip.$el) tooltip.scope\n\t\t\t\t\ttooltip.scope.$apply()\n\t\t\t\t\ttooltip.show()\n\n\t\t\t\tonMouseLeave = (event)->\n\t\t\t\t\tevent.stopPropagation()\n\n\t\t\t\t\t$target = angular.element event.target\n\t\t\t\t\ttargetId = if (attrId = $target.attr(\"data-annotation-id\"))? then parseInt(attrId, 10)\n\n\t\t\t\t\tif not targetId?\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tclearTooltip()\n\n\t\t\t\tloadAnnotationPopup = (annotation, anchor, isNew)->\n\t\t\t\t\tpopup = new NGAnnotatePopup\n\t\t\t\t\t\tscope: $rootScope.$new()\n\t\t\t\t\t\tcallbacks:\n\t\t\t\t\t\t\tshow: $scope.onEditorShow\n\t\t\t\t\t\t\thide: $scope.onEditorHide\n\t\t\t\t\t\ttemplate: \"<div class='ng-annotate-popup' />\"\n\t\t\t\t\t\tpositionClass: \"ng-annotate-popup-docked ng-annotate-popup-docked-{{position}}\"\n\t\t\t\t\t\t$anchor: anchor\n\t\t\t\t\t\toffset: POPUP_OFFSET\n\n\t\t\t\t\tpopup.scope.$isNew = isNew\n\t\t\t\t\tpopup.scope.$annotation = annotation\n\t\t\t\t\tpopup.scope.$readonly = options.readonly\n\n\t\t\t\t\tpopup.scope.$reject = ->\n\t\t\t\t\t\tremoveAnnotation annotation.id, $scope.annotations\n\t\t\t\t\t\t\n\t\t\t\t\t\tif $scope.onAnnotateDelete?\n\t\t\t\t\t\t\t$scope.onAnnotateDelete annotation\n\t\t\t\t\t\tclearPopup()\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tpopup.scope.$close = ->\n\t\t\t\t\t\tif $scope.onAnnotate?\n\t\t\t\t\t\t\t$scope.onAnnotate popup.scope.$annotation\n\t\t\t\t\t\tclearPopup()\n\t\t\t\t\t\treturn\n\n\t\t\t\t\tactivePopup = popup\n\n\t\t\t\t\tlocals = \n\t\t\t\t\t\t$scope: popup.scope\n\t\t\t\t\t\t$template: popupTemplateData\n\n\t\t\t\t\tpopup.$el.html locals.$template\n\t\t\t\t\tpopup.$el.appendTo \"body\"\n\t\t\t\t\t\n\t\t\t\t\tif options.popupController\n\t\t\t\t\t\tcontroller = $controller options.popupController, locals\n\t\t\t\t\t\tpopup.$el.data \"$ngControllerController\", controller\n\t\t\t\t\t\tpopup.$el.children().data \"$ngControllerController\", controller\n\n\t\t\t\t\t$compile(popup.$el) popup.scope\n\t\t\t\t\tpopup.scope.$apply()\n\t\t\t\t\tpopup.show()\n\n\t\t\t\telement.on \"mouseenter\", \"span\", onMouseEnter\n\t\t\t\telement.on \"mouseleave\", \"span\", onMouseLeave\n\n\t\t\t\telement.on \"mouseup\", (event)->\n\t\t\t\t\t# We need to determine if the user actually selected something\n\t\t\t\t\t# or if he just clicked on an annotation\n\t\t\t\t\tselection = window.getSelection()\n\t\t\t\t\tif !selection.isCollapsed and !options.readonly\n\t\t\t\t\t\t# User has selected something\n\t\t\t\t\t\tonSelect event\n\t\t\t\t\telse if selection.isCollapsed and event.target.nodeName is \"SPAN\"\n\t\t\t\t\t\tonClick event\n\t\t\t\t\telse if selection.isCollapsed\n\t\t\t\t\t\tclearTooltip()\n\t\t\t\t\t\tclearPopup()\n\t}\n"]}